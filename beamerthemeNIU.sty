%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Created October 7, 2018 %%%%%%%%%%%%%%%
%%%% Ramanpreet Singh        %%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\mode<presentation>
\usetheme[progressbar=frametitle, subsectionpage=progressbar]{metropolis}

\makeatletter
\setlength{\metropolis@titleseparator@linewidth}{1.1pt}
\setlength{\metropolis@progressonsectionpage@linewidth}{1.1pt}
\setlength{\metropolis@progressinheadfoot@linewidth}{1.1pt}
\makeatother

\usepackage[absolute,overlay]{textpos}
\usepackage{booktabs}

\ProvidesPackage{beamerthemeNIU}

% color definitions
\definecolor{NIUred}{RGB}{200,16,46}
\definecolor{NIUgray}{RGB}{165,167,168}
\definecolor{NIUwhite}{RGB}{255,255,255}
\definecolor{NIUblack}{RGB}{0,0,0}

% set the title color
\setbeamercolor{title}{fg=NIUred}
\setbeamercolor{subtitle}{fg=NIUred}

% set the frame title color
\setbeamercolor{frametitle}{fg=NIUwhite,bg=NIUred}
\setbeamercolor{framesubtitle}{fg=mDarkTeal}

% set the progress bar color
\setbeamercolor{progress bar}{fg=orange, bg=NIUgray}

%set the block, itemize colors
\setbeamercolor{block}{fg=NIUred}
\setbeamercolor{block item}{fg=NIUred}
\setbeamercolor{itemize item}{fg=NIUred}
\setbeamercolor{block title}{fg=NIUwhite,bg=NIUred}
\setbeamercolor{block body}{bg=NIUgray!15!white}
\setbeamercolor{block title example}{fg=NIUwhite, bg=NIUred}
\setbeamercolor{block body example}{bg=NIUgray!15!white}
\setbeamercolor{block title alerted}{fg=NIUwhite, bg=mLightGreen}
\setbeamercolor{block body alerted}{bg=NIUgray!15!white}
\setbeamercolor{structure}{fg=NIUred}

% footer colors
\setbeamercolor{section in footer}{fg=NIUwhite,bg=mDarkTeal!65!NIUblack}
\setbeamercolor{subsection in footer}{fg=NIUwhite,bg=mDarkTeal}
\setbeamercolor{pagenumber in footer}{fg=NIUwhite,bg=mDarkTeal!65!NIUblack}

\setbeamercolor{shadow}{fg=black}

%changing footer line
\setbeamertemplate{footline}
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.34\paperwidth,ht=2.25ex,dp=1ex,center]{section in footer}%
    \insertshorttitle
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.32\paperwidth,ht=2.25ex,dp=1ex,center]{subsection in footer}%
    \insertsectionhead
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.34\paperwidth,ht=2.25ex,dp=1ex,center]{pagenumber in footer}%
   \insertshortauthor \ (\insertshortinstitute), \quad \insertframenumber{} / \inserttotalframenumber\hspace*{2ex} 
  \end{beamercolorbox}}%
  \vskip0pt%
}

% changing title graphic position
\setbeamertemplate{title page}
{
   \vskip 0.1em
  {\centering \usebeamercolor[fg]{titlegraphic}\inserttitlegraphic\par}
  \vbox{}
  \vfill
  \begingroup
    \centering
    \begin{beamercolorbox}[sep=3pt,center]{title}
      \usebeamerfont{title}\inserttitle\par%
      \ifx\insertsubtitle\@empty%
      \else%
        \vskip0.25em%
        {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
      \fi%     
    \end{beamercolorbox}%
    \vskip1em\par
    \begin{beamercolorbox}[sep=3pt,center,]{author}
      \usebeamerfont{author} \insertauthor
    \end{beamercolorbox}
    \begin{beamercolorbox}[sep=3pt,center]{institute}
      \usebeamerfont{institute}\insertinstitute
    \end{beamercolorbox}
    \begin{beamercolorbox}[sep=3pt,center]{date}
      \usebeamerfont{date}\insertdate
    \end{beamercolorbox}\vskip0.5em
  \endgroup
  \vfill
}

% change logo position

% first remove default 
\setbeamertemplate{sidebar right}
{
    \vfill%
    \llap{\usebeamertemplate***{navigation symbols}\hskip0.1cm}%
    \vskip2pt
}
% Now adding to frametitle
\addtobeamertemplate{frametitle}
{
   \begin{textblock*}{3cm}(1.03\textwidth,0.42cm)
   \insertlogo
   \end{textblock*}
}
{% adding subtitle, officially not supported by metropolis theme
  \ifx\insertframesubtitle\@empty\else%
  \usebeamerfont{framesubtitle}%
  \usebeamercolor[fg]{framesubtitle}%
  \insertframesubtitle%
  \fi%
}
\mode
<all>
